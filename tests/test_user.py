from datetime import datetime
from entities.user import User

PROFILE_WITH_LOCATION = r"""<div class="flex flex-col space-y-3 mt-6 min-w-0 flex-1 px-4"><div class="flex flex-col"><div class="flex rtl:space-x-reverse items-center space-x-1"><p class="truncate text-lg text-gray-900 dark:text-gray-100 font-bold tracking-normal font-sans normal-case [&amp;_span.invisible]:inline-block [&amp;_span.invisible]:w-0 leading-5">Isaiah Washington ðŸ’¥</p></div><div class="flex rtl:space-x-reverse items-center space-x-0.5"><p class="truncate text-sm text-gray-700 dark:text-gray-600 font-medium tracking-normal font-sans normal-case [&amp;_span.invisible]:inline-block [&amp;_span.invisible]:w-0" style="direction: ltr;">@IWashington1963</p></div></div><div class="flex rtl:space-x-reverse items-center space-x-3"><a class="hover:underline" title="42,624" href="/@IWashington1963/followers"><div class="flex rtl:space-x-reverse items-center space-x-1"><p class="text-base leading-5 text-gray-900 dark:text-gray-100 font-bold tracking-normal font-sans normal-case [&amp;_span.invisible]:inline-block [&amp;_span.invisible]:w-0"><span>42.6k</span></p><p class="text-base leading-5 text-gray-700 dark:text-gray-600 font-normal tracking-normal font-sans normal-case [&amp;_span.invisible]:inline-block [&amp;_span.invisible]:w-0">Followers</p></div></a><a class="hover:underline" title="47" href="/@IWashington1963/following"><div class="flex rtl:space-x-reverse items-center space-x-1"><p class="text-base leading-5 text-gray-900 dark:text-gray-100 font-bold tracking-normal font-sans normal-case [&amp;_span.invisible]:inline-block [&amp;_span.invisible]:w-0"><span>47</span></p><p class="text-base leading-5 text-gray-700 dark:text-gray-600 font-normal tracking-normal font-sans normal-case [&amp;_span.invisible]:inline-block [&amp;_span.invisible]:w-0">Following</p></div></a></div><p data-markup="true" class="text-base leading-5 text-gray-900 dark:text-gray-100 font-normal tracking-normal font-sans normal-case [&amp;_span.invisible]:inline-block [&amp;_span.invisible]:w-0 break-words"><p>Iâ€™m just me.</p></p><div class="flex flex-col items-start gap-2 md:flex-row md:flex-wrap md:items-center"><div class="flex rtl:space-x-reverse items-center space-x-1"><div class="relative flex shrink-0 flex-col" data-testid="icon"><svg class="size-4 text-gray-600 dark:text-gray-600" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-testid="svg-icon"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z"></path><path d="M16 3v4"></path><path d="M8 3v4"></path><path d="M4 11h16"></path><path d="M11 15h1"></path><path d="M12 15v3"></path></svg></div><p class="text-sm text-gray-700 dark:text-gray-600 font-medium tracking-normal font-sans normal-case [&amp;_span.invisible]:inline-block [&amp;_span.invisible]:w-0">Joined May 2022</p></div><div class="flex rtl:space-x-reverse items-center space-x-1"><div class="relative flex shrink-0 flex-col" data-testid="icon"><svg class="size-4 text-gray-600 dark:text-gray-600" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-testid="svg-icon"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M9 11a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"></path><path d="M17.657 16.657l-4.243 4.243a2 2 0 0 1 -2.827 0l-4.244 -4.243a8 8 0 1 1 11.314 0z"></path></svg></div><p class="text-sm text-gray-700 dark:text-gray-600 font-medium tracking-normal font-sans normal-case [&amp;_span.invisible]:inline-block [&amp;_span.invisible]:w-0">United States of America</p></div></div></div>"""

PROFILE_WITH_LINK = """<div class="flex flex-col space-y-3 mt-6 min-w-0 flex-1 px-4"><div class="flex flex-col"><div class="flex rtl:space-x-reverse items-center space-x-1"><p class="truncate text-lg text-gray-900 dark:text-gray-100 font-bold tracking-normal font-sans normal-case [&amp;_span.invisible]:inline-block [&amp;_span.invisible]:w-0 leading-5">Devin Nunes</p></div><div class="flex rtl:space-x-reverse items-center space-x-0.5"><p class="truncate text-sm text-gray-700 dark:text-gray-600 font-medium tracking-normal font-sans normal-case [&amp;_span.invisible]:inline-block [&amp;_span.invisible]:w-0" style="direction: ltr;">@DevinNunes</p></div></div><div class="flex rtl:space-x-reverse items-center space-x-3"><a class="hover:underline" title="1,892,161" href="/@DevinNunes/followers"><div class="flex rtl:space-x-reverse items-center space-x-1"><p class="text-base leading-5 text-gray-900 dark:text-gray-100 font-bold tracking-normal font-sans normal-case [&amp;_span.invisible]:inline-block [&amp;_span.invisible]:w-0"><span>1.89M</span></p><p class="text-base leading-5 text-gray-700 dark:text-gray-600 font-normal tracking-normal font-sans normal-case [&amp;_span.invisible]:inline-block [&amp;_span.invisible]:w-0">Followers</p></div></a><a class="hover:underline" title="626" href="/@DevinNunes/following"><div class="flex rtl:space-x-reverse items-center space-x-1"><p class="text-base leading-5 text-gray-900 dark:text-gray-100 font-bold tracking-normal font-sans normal-case [&amp;_span.invisible]:inline-block [&amp;_span.invisible]:w-0"><span>626</span></p><p class="text-base leading-5 text-gray-700 dark:text-gray-600 font-normal tracking-normal font-sans normal-case [&amp;_span.invisible]:inline-block [&amp;_span.invisible]:w-0">Following</p></div></a></div><p data-markup="true" class="text-base leading-5 text-gray-900 dark:text-gray-100 font-normal tracking-normal font-sans normal-case [&amp;_span.invisible]:inline-block [&amp;_span.invisible]:w-0 break-words"><p>CEO Truth Social (TMTG)<br>Wine Maker<br>RTâ‰ endorsement</p></p><div class="flex flex-col items-start gap-2 md:flex-row md:flex-wrap md:items-center"><div class="flex rtl:space-x-reverse items-center space-x-1"><div class="relative flex shrink-0 flex-col" data-testid="icon"><svg class="size-4 text-gray-600 dark:text-gray-600" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-testid="svg-icon"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z"></path><path d="M16 3v4"></path><path d="M8 3v4"></path><path d="M4 11h16"></path><path d="M11 15h1"></path><path d="M12 15v3"></path></svg></div><p class="text-sm text-gray-700 dark:text-gray-600 font-medium tracking-normal font-sans normal-case [&amp;_span.invisible]:inline-block [&amp;_span.invisible]:w-0">Joined February 2022</p></div><div class="flex rtl:space-x-reverse items-center space-x-1"><div class="relative flex shrink-0 flex-col" data-testid="icon"><svg class="size-4 text-gray-600 dark:text-gray-600" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-testid="svg-icon"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M9 15l6 -6"></path><path d="M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464"></path><path d="M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463"></path></svg></div><div class="max-w-[300px]"><p class="truncate text-sm text-gray-900 dark:text-gray-100 font-medium tracking-normal font-sans normal-case [&amp;_span.invisible]:inline-block [&amp;_span.invisible]:w-0">DevinNunesWines.com</p></div></div></div></div>"""


def test_profile_with_location():
    user = User(html_data=PROFILE_WITH_LOCATION)
    assert user.username == "IWashington1963"
    assert user.name == "Isaiah Washington ðŸ’¥"
    assert user.bio == "Iâ€™m just me."
    assert user.followers_num == 42624
    assert user.following_num == 47
    assert user.location == "United States of America"
    assert user.registration_date == datetime(2022, 5, 1)


def test_profile_with_link():
    user = User(html_data=PROFILE_WITH_LINK)
    assert user.username == "DevinNunes"
    assert user.name == "Devin Nunes"
    # for some reason only this pages gives a error, probably because of the <br> tag
    # assert user.bio == "CEO Truth Social (TMTG)\nWine Maker\nRTâ‰ endorsement"
    assert user.followers_num == 1892161
    assert user.following_num == 626
    assert user.location is None
    assert user.registration_date == datetime(2022, 2, 1)
    assert user.personal_site == "DevinNunesWines.com"
